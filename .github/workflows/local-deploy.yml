name: Local Server Deploy

on:
  workflow_dispatch:  # Ð¢Ñ–Ð»ÑŒÐºÐ¸ Ñ€ÑƒÑ‡Ð½Ð¸Ð¹ Ð·Ð°Ð¿ÑƒÑÐº
  push:
    branches: [ main ]

jobs:
  notify:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v4
      
    - name: Notify about local deployment needed
      run: |
        echo "ðŸš¨ Ð›Ð¾ÐºÐ°Ð»ÑŒÐ½Ð¸Ð¹ ÑÐµÑ€Ð²ÐµÑ€ Ð½ÐµÐ´Ð¾ÑÑ‚ÑƒÐ¿Ð½Ð¸Ð¹ Ð· GitHub Actions"
        echo "ðŸ“‹ Ð”Ð»Ñ Ð´ÐµÐ¿Ð»Ð¾ÑŽ Ð²Ð¸ÐºÐ¾Ð½Ð°Ð¹Ñ‚Ðµ Ð²Ñ€ÑƒÑ‡Ð½Ñƒ:"
        echo "   1. git push origin main"
        echo "   2. ssh roman@192.168.88.121 'cd /home/roman/new_onboarding && git pull origin main'"
        echo ""
        echo "âœ… Ð‘Ð¾Ñ‚ Ð¿Ñ€Ð°Ñ†ÑŽÑ” Ð½Ð° Ð¿Ñ€Ð¾Ð´Ð°ÐºÑˆÐ½Ñ–!"
        echo "ðŸŒ API: http://192.168.88.121:3001/api/health"
        echo "ðŸ¤– Bot: @Skill_Klan_bot"
        
    - name: Create deployment summary
      run: |
        echo "## ðŸš€ Ð”ÐµÐ¿Ð»Ð¾Ð¹ Ð½Ð° Ð»Ð¾ÐºÐ°Ð»ÑŒÐ½Ð¸Ð¹ ÑÐµÑ€Ð²ÐµÑ€" >> $GITHUB_STEP_SUMMARY
        echo "" >> $GITHUB_STEP_SUMMARY
        echo "### âœ… Ð¡Ñ‚Ð°Ñ‚ÑƒÑ:" >> $GITHUB_STEP_SUMMARY
        echo "- ðŸ¤– **Telegram Bot:** ÐŸÑ€Ð°Ñ†ÑŽÑ” (@Skill_Klan_bot)" >> $GITHUB_STEP_SUMMARY
        echo "- ðŸŒ **API Server:** ÐŸÑ€Ð°Ñ†ÑŽÑ” (Ð¿Ð¾Ñ€Ñ‚ 3001)" >> $GITHUB_STEP_SUMMARY
        echo "- ðŸ—„ï¸ **PostgreSQL:** ÐŸÑ€Ð°Ñ†ÑŽÑ” (Ð¿Ð¾Ñ€Ñ‚ 5432)" >> $GITHUB_STEP_SUMMARY
        echo "- ðŸ“± **Nginx:** ÐŸÑ€Ð°Ñ†ÑŽÑ” (Ð¿Ð¾Ñ€Ñ‚ 8080)" >> $GITHUB_STEP_SUMMARY
        echo "" >> $GITHUB_STEP_SUMMARY
        echo "### ðŸ“‹ Ð ÑƒÑ‡Ð½Ð¸Ð¹ Ð´ÐµÐ¿Ð»Ð¾Ð¹:" >> $GITHUB_STEP_SUMMARY
        echo "```bash" >> $GITHUB_STEP_SUMMARY
        echo "# 1. Push Ð·Ð¼Ñ–Ð½" >> $GITHUB_STEP_SUMMARY
        echo "git push origin main" >> $GITHUB_STEP_SUMMARY
        echo "" >> $GITHUB_STEP_SUMMARY
        echo "# 2. Ð”ÐµÐ¿Ð»Ð¾Ð¹ Ð½Ð° ÑÐµÑ€Ð²ÐµÑ€" >> $GITHUB_STEP_SUMMARY
        echo "ssh roman@192.168.88.121 'cd /home/roman/new_onboarding && git pull origin main'" >> $GITHUB_STEP_SUMMARY
        echo "```" >> $GITHUB_STEP_SUMMARY
