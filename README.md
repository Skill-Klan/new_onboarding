# üöÄ SkillKlan Mini App - Docker Edition

## üìã –û–ü–ò–°

SkillKlan Mini App - —Ü–µ Telegram Mini App –¥–ª—è —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –Ω–∞–≤–∏—á–∫–∞–º–∏ —Ç–∞ —Ç–∞–ª–∞–Ω—Ç–∞–º–∏. –ü—Ä–æ–µ–∫—Ç –ø–æ–≤–Ω—ñ—Å—Ç—é –º—ñ–≥—Ä–æ–≤–∞–Ω–æ –Ω–∞ Docker –¥–ª—è –∫—Ä–∞—â–æ—ó –º–∞—Å—à—Ç–∞–±–æ–≤–∞–Ω–æ—Å—Ç—ñ —Ç–∞ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è.

## üê≥ DOCKER –ê–†–•–Ü–¢–ï–ö–¢–£–†–ê

### **–°–µ—Ä–≤—ñ—Å–∏:**
- **postgres**: PostgreSQL –±–∞–∑–∞ –¥–∞–Ω–∏—Ö (–ø–æ—Ä—Ç 5432)
- **server**: Node.js API —Å–µ—Ä–≤–µ—Ä (–ø–æ—Ä—Ç 3000)
- **nginx**: Nginx –≤–µ–±-—Å–µ—Ä–≤–µ—Ä (–ø–æ—Ä—Ç–∏ 80, 443)

### **–¢–æ–º–∏:**
- **postgres_data**: –î–∞–Ω—ñ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö
- **server_logs**: –õ–æ–≥–∏ API —Å–µ—Ä–≤–µ—Ä–∞
- **server_data**: –î–∞–Ω—ñ API —Å–µ—Ä–≤–µ—Ä–∞
- **nginx_logs**: –õ–æ–≥–∏ Nginx

## üöÄ –®–í–ò–î–ö–ò–ô –°–¢–ê–†–¢

### **1. –ö–ª–æ–Ω—É–≤–∞–Ω–Ω—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é:**
```bash
git clone <repository-url>
cd new_onboarding
```

### **2. –ö–æ–ø—ñ—é–≤–∞–Ω–Ω—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä:**
```bash
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è –≤—Å—ñ—Ö —Ñ–∞–π–ª—ñ–≤
./copy-to-server.sh

# –ê–±–æ —Ä—É—á–Ω–µ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è
scp -r -P 2222 . roman@37.57.209.201:/var/www/skillklan/
```

### **3. –ó–∞–ø—É—Å–∫ –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ:**
```bash
# –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ —Å–µ—Ä–≤–µ—Ä–∞
ssh -p 2222 roman@37.57.209.201

# –ü–µ—Ä–µ—Ö—ñ–¥ –≤ –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç—É
cd /var/www/skillklan

# –ó–∞–ø—É—Å–∫ –≤—Å—ñ—Ö —Å–µ—Ä–≤—ñ—Å—ñ–≤
./docker-deploy.sh deploy
```

## üìÅ –°–¢–†–£–ö–¢–£–†–ê –ü–†–û–ï–ö–¢–£

```
new_onboarding/
‚îú‚îÄ‚îÄ .github/workflows/          # GitHub Actions –¥–ª—è CI/CD
‚îÇ   ‚îú‚îÄ‚îÄ smart-deploy.yml       # –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π Docker –¥–µ–ø–ª–æ–π
‚îÇ   ‚îú‚îÄ‚îÄ manual-deploy.yml      # –†—É—á–Ω–∏–π Docker –¥–µ–ø–ª–æ–π
‚îÇ   ‚îî‚îÄ‚îÄ test-and-validate.yml  # –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è —Ç–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—è
‚îú‚îÄ‚îÄ server/                     # Backend API —Å–µ—Ä–≤–µ—Ä
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile             # Docker –æ–±—Ä–∞–∑ –¥–ª—è —Å–µ—Ä–≤–µ—Ä–∞
‚îÇ   ‚îú‚îÄ‚îÄ .dockerignore          # Docker —ñ–≥–Ω–æ—Ä—É–≤–∞–Ω–Ω—è
‚îÇ   ‚îú‚îÄ‚îÄ healthcheck.js         # Health check –¥–ª—è Docker
‚îÇ   ‚îú‚îÄ‚îÄ server.js              # –û—Å–Ω–æ–≤–Ω–∞ –ª–æ–≥—ñ–∫–∞ API
‚îÇ   ‚îú‚îÄ‚îÄ package.json           # –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ —Å–µ—Ä–≤–µ—Ä–∞
‚îÇ   ‚îî‚îÄ‚îÄ config.env             # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞
‚îú‚îÄ‚îÄ miniapp/                    # Frontend Mini App
‚îÇ   ‚îú‚îÄ‚îÄ src/                   # Vue.js –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏
‚îÇ   ‚îú‚îÄ‚îÄ package.json           # –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ frontend
‚îÇ   ‚îî‚îÄ‚îÄ vite.config.ts         # Vite –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
‚îú‚îÄ‚îÄ docker/                     # Docker –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
‚îÇ   ‚îú‚îÄ‚îÄ nginx/                 # Nginx –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ nginx.conf         # –û—Å–Ω–æ–≤–Ω–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ conf.d/            # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó —Å–∞–π—Ç—ñ–≤
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ssl/               # SSL —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∏
‚îÇ   ‚îî‚îÄ‚îÄ README.md              # Docker –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è
‚îú‚îÄ‚îÄ docker-compose.yml          # –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü—ñ—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤
‚îú‚îÄ‚îÄ docker-deploy.sh            # –°–∫—Ä–∏–ø—Ç –¥–µ–ø–ª–æ—é
‚îú‚îÄ‚îÄ docker-backup.sh            # –°–∫—Ä–∏–ø—Ç —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è
‚îú‚îÄ‚îÄ docker-monitor.sh           # –°–∫—Ä–∏–ø—Ç –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É
‚îú‚îÄ‚îÄ copy-to-server.sh           # –°–∫—Ä–∏–ø—Ç –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä
‚îú‚îÄ‚îÄ DOCKER_MIGRATION_GUIDE.md   # –ì—ñ–¥ –ø–æ –º—ñ–≥—Ä–∞—Ü—ñ—ó
‚îî‚îÄ‚îÄ README.md                   # –¶–µ–π —Ñ–∞–π–ª
```

## üîß –ù–ê–õ–ê–®–¢–£–í–ê–ù–ù–Ø

### **–õ–æ–∫–∞–ª—å–Ω–∞ —Ä–æ–∑—Ä–æ–±–∫–∞:**
```bash
# Backend
cd server
npm install
npm run dev

# Frontend
cd miniapp
npm install
npm run dev
```

### **Docker —Ä–æ–∑—Ä–æ–±–∫–∞:**
```bash
# –ó–∞–ø—É—Å–∫ –≤—Å—ñ—Ö —Å–µ—Ä–≤—ñ—Å—ñ–≤
docker-compose up -d

# –ü–µ—Ä–µ–≥–ª—è–¥ –ª–æ–≥—ñ–≤
docker-compose logs -f

# –ó—É–ø–∏–Ω–∫–∞
docker-compose down
```

## üöÄ –î–ï–ü–õ–û–ô

### **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –¥–µ–ø–ª–æ–π (GitHub Actions):**
- Push –≤ `main` –∞–±–æ `develop` –≥—ñ–ª–∫–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–∞–ø—É—Å–∫–∞—î –¥–µ–ø–ª–æ–π
- –†–æ–∑—É–º–Ω–∞ –∞–Ω–∞–ª—ñ–∑–∞ –∑–º—ñ–Ω –¥–ª—è —á–∞—Å—Ç–∫–æ–≤–æ–≥–æ –¥–µ–ø–ª–æ—é
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ health checks —Ç–∞ –≤—ñ–¥–∫–∞—Ç –ø—Ä–∏ –Ω–µ–≤–¥–∞—á—ñ

### **–†—É—á–Ω–∏–π –¥–µ–ø–ª–æ–π:**
```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä—ñ
cd /var/www/skillklan
./docker-deploy.sh deploy

# –ê–±–æ —á–µ—Ä–µ–∑ GitHub Actions
# Actions -> Manual Deploy -> Run workflow
```

### **–ö–æ–ø—ñ—é–≤–∞–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤ –Ω–∞ —Å–µ—Ä–≤–µ—Ä:**
```bash
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è
./copy-to-server.sh

# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ñ–∞–π–ª—ñ–≤
./copy-to-server.sh --check

# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ
./copy-to-server.sh --verify
```

## üìä –ú–û–ù–Ü–¢–û–†–ò–ù–ì

### **–ü–µ—Ä–µ–≥–ª—è–¥ —Å—Ç–∞—Ç—É—Å—É:**
```bash
# –°—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤
./docker-monitor.sh status

# –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ —Ä–µ—Å—É—Ä—Å—ñ–≤
./docker-monitor.sh resources

# –ü–æ–≤–Ω–∏–π –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥
./docker-monitor.sh monitor

# –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑–≤—ñ—Ç—É
./docker-monitor.sh report
```

### **–£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Å–µ—Ä–≤—ñ—Å–∞–º–∏:**
```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
docker-compose restart

# –û–Ω–æ–≤–ª–µ–Ω–Ω—è
docker-compose pull && docker-compose up -d

# –ó—É–ø–∏–Ω–∫–∞
docker-compose down

# –õ–æ–≥–∏
docker-compose logs -f [service_name]
```

## üíæ –†–ï–ó–ï–†–í–ù–ï –ö–û–ü–Ü–Æ–í–ê–ù–ù–Ø

### **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ —Ä–µ–∑–µ—Ä–≤–Ω–µ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è:**
```bash
# –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ä–µ–∑–µ—Ä–≤–Ω–æ—ó –∫–æ–ø—ñ—ó
./docker-backup.sh backup

# –ü–µ—Ä–µ–≥–ª—è–¥ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
./docker-backup.sh stats

# –í—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è
./docker-backup.sh restore [filename]

# –û—á–∏—â–µ–Ω–Ω—è —Å—Ç–∞—Ä–∏—Ö —Ñ–∞–π–ª—ñ–≤
./docker-backup.sh cleanup
```

## üîê SSL/HTTPS

### **–ì–µ–Ω–µ—Ä–∞—Ü—ñ—è —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç—ñ–≤:**
```bash
cd docker/nginx/ssl
./generate-ssl.sh
```

### **–ê–∫—Ç–∏–≤–∞—Ü—ñ—è HTTPS:**
1. –†–æ–∑–∫–æ–º–µ–Ω—Ç—É–≤–∞—Ç–∏ HTTPS –±–ª–æ–∫ –≤ `docker/nginx/conf.d/skillklan.conf`
2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏ Nginx: `docker-compose restart nginx`

## üÜò –í–ò–†–Ü–®–ï–ù–ù–Ø –ü–†–û–ë–õ–ï–ú

### **–ü–æ—à–∏—Ä–µ–Ω—ñ –ø—Ä–æ–±–ª–µ–º–∏:**

#### **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è:**
```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ª–æ–≥—ñ–≤
docker-compose logs [service_name]

# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó
docker-compose config

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
docker-compose restart [service_name]
```

#### **–ü—Ä–æ–±–ª–µ–º–∏ –∑ –±–∞–∑–æ—é –¥–∞–Ω–∏—Ö:**
```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è
docker-compose exec postgres pg_isready -U skillklan_user

# –í—Ö—ñ–¥ –≤ –±–∞–∑—É
docker-compose exec postgres psql -U skillklan_user -d skillklan_db
```

#### **–ü—Ä–æ–±–ª–µ–º–∏ –∑ Nginx:**
```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó
docker-compose exec nginx nginx -t

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
docker-compose restart nginx
```

### **–í—ñ–¥–∫–∞—Ç –¥–æ PM2:**
```bash
# –ó—É–ø–∏–Ω–∫–∞ Docker
docker-compose down

# –í—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è PM2
cd server
pm2 start ecosystem.config.js --env production

# –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º–Ω–∏—Ö —Å–µ—Ä–≤—ñ—Å—ñ–≤
sudo systemctl start nginx
sudo systemctl start postgresql
```

## üìã –ö–û–ù–¢–†–û–õ–¨–ù–ò–ô –°–ü–ò–°–û–ö –î–ï–ü–õ–û–Æ

- [ ] –§–∞–π–ª–∏ —Å–∫–æ–ø—ñ–π–æ–≤–∞–Ω–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
- [ ] Docker –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ
- [ ] –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∞
- [ ] SSL —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∏ –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–æ
- [ ] Docker —Å–µ—Ä–≤—ñ—Å–∏ –∑–∞–ø—É—â–µ–Ω–æ
- [ ] Health checks –ø—Ä–æ–π–¥–µ–Ω—ñ
- [ ] –ó–æ–≤–Ω—ñ—à–Ω—ñ–π –¥–æ—Å—Ç—É–ø –ø—Ä–∞—Ü—é—î
- [ ] –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ

## üéØ –ù–ê–°–¢–£–ü–ù–Ü –ö–†–û–ö–ò

–ü—ñ—Å–ª—è —É—Å–ø—ñ—à–Ω–æ–≥–æ –¥–µ–ø–ª–æ—é:
1. –ù–∞–ª–∞—à—Ç—É–π—Ç–µ —Ä–µ–≥—É–ª—è—Ä–Ω—ñ —Ä–µ–∑–µ—Ä–≤–Ω—ñ –∫–æ–ø—ñ—ó
2. –ù–∞–ª–∞—à—Ç—É–π—Ç–µ –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ —Ç–∞ –∞–ª–µ—Ä—Ç–∏
3. –û–ø—Ç–∏–º—ñ–∑—É–π—Ç–µ Docker –æ–±—Ä–∞–∑–∏
4. –ù–∞–ª–∞—à—Ç—É–π—Ç–µ CI/CD –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ –¥–µ–ø–ª–æ—é

## üìû –ü–Ü–î–¢–†–ò–ú–ö–ê

–ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö:
1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏: `docker-compose logs`
2. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Å—Ç–∞—Ç—É—Å: `docker-compose ps`
3. –í–∏–∫–æ—Ä–∏—Å—Ç–∞–π—Ç–µ –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥: `./docker-monitor.sh`
4. –ó–≤–µ—Ä–Ω—ñ—Ç—å—Å—è –¥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó Docker
5. –ü–µ—Ä–µ–≥–ª—è–Ω—å—Ç–µ `DOCKER_MIGRATION_GUIDE.md`

## üîó –ö–û–†–ò–°–ù–Ü –ü–û–°–ò–õ–ê–ù–ù–Ø

- [Docker Documentation](https://docs.docker.com/)
- [Docker Compose](https://docs.docker.com/compose/)
- [Nginx Documentation](https://nginx.org/en/docs/)
- [PostgreSQL Documentation](https://www.postgresql.org/docs/)
- [Vue.js Documentation](https://vuejs.org/guide/)

---

**SkillKlan Mini App - –¢–µ–ø–µ—Ä –∑ Docker! üê≥üöÄ**


