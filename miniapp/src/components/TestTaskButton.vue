<template>
    <button class="test-task-button" @click="downloadTestTask">
      <span class="button-icon">üìã</span>
      <span class="button-text">–û—Ç—Ä–∏–º–∞—Ç–∏ —Ç–µ—Å—Ç–æ–≤–µ –∑–∞–≤–¥–∞–Ω–Ω—è</span>
    </button>
  </template>
  
  <script setup lang="ts">
  import { useRoute } from 'vue-router'
  
  const route = useRoute()
  const profession = route.params.profession as string
  
  const downloadTestTask = async () => {
    try {
      // –®–ª—è—Ö –¥–æ PDF —Ñ–∞–π–ª—É –≤ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –≤—ñ–¥ –ø—Ä–æ—Ñ–µ—Å—ñ—ó
      const pdfPath = `/src/data/test-tasks/${profession}-test-task.pdf`
      
      // –°—Ç–≤–æ—Ä—é—î–º–æ –ø–æ—Å–∏–ª–∞–Ω–Ω—è –¥–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
      const link = document.createElement('a')
      link.href = pdfPath
      link.download = `${profession.toUpperCase()}-test-task.pdf`
      
      // –î–æ–¥–∞—î–º–æ –ø–æ—Å–∏–ª–∞–Ω–Ω—è –¥–æ DOM —Ç–∞ –∫–ª—ñ–∫–∞—î–º–æ
      document.body.appendChild(link)
      link.click()
      
      // –í–∏–¥–∞–ª—è—î–º–æ –ø–æ—Å–∏–ª–∞–Ω–Ω—è
      document.body.removeChild(link)
    } catch (error) {
      console.error('–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∑–∞–≤–¥–∞–Ω–Ω—è:', error)
      alert('–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è. –°–ø—Ä–æ–±—É–π—Ç–µ —â–µ —Ä–∞–∑.')
    }
  }
  </script>
  
  <style scoped>
  .test-task-button {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 16px 24px;
    background: linear-gradient(135deg, #10b981 0%, #059669 100%);
    border: none;
    border-radius: 12px;
    color: white;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3);
    width: 100%;
    max-width: 400px;
    margin: 20px auto;
    justify-content: center;
  }
  
  .test-task-button:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(16, 185, 129, 0.4);
    background: linear-gradient(135deg, #059669 0%, #047857 100%);
  }
  
  .test-task-button:active {
    transform: translateY(0);
  }
  
  .button-icon {
    font-size: 20px;
  }
  
  .button-text {
    font-size: 16px;
    font-weight: 600;
  }
  
  /* –ê–¥–∞–ø—Ç–∏–≤–Ω—ñ—Å—Ç—å */
  @media (max-width: 768px) {
    .test-task-button {
      padding: 14px 20px;
      font-size: 15px;
    }
    
    .button-text {
      font-size: 15px;
    }
  }
  
  @media (max-width: 480px) {
    .test-task-button {
      padding: 12px 16px;
      font-size: 14px;
    }
    
    .button-text {
      font-size: 14px;
    }
    
    .button-icon {
      font-size: 18px;
    }
  }
  </style>