/**
 * BotConfig - –¶–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –±–æ—Ç–∞
 * 
 * –ú—ñ—Å—Ç–∏—Ç—å –≤—Å—ñ —Ç–µ–∫—Å—Ç–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å, –∫–Ω–æ–ø–∫–∏ —Ç–∞ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è.
 * –ó–∞–±–µ–∑–ø–µ—á—É—î DRY –ø—Ä–∏–Ω—Ü–∏–ø —Ç–∞ –ª–µ–≥–∫—É –∑–º—ñ–Ω—É UI.
 */

const { Markup } = require('telegraf');

class BotConfig {
  /**
   * –ü—Ä–∏–≤—ñ—Ç–∞–ª—å–Ω–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
   */
  static getWelcomeMessage() {
    return `üëã –ü—Ä–∏–≤—ñ—Ç! –Ø –±–æ—Ç SkillKlan!

üéØ –î–æ–ø–æ–º–æ–∂—É —Ç–æ–±—ñ –æ–±—Ä–∞—Ç–∏ –Ω–∞–ø—Ä—è–º–æ–∫ –Ω–∞–≤—á–∞–Ω–Ω—è —Ç–∞ –æ—Ç—Ä–∏–º–∞—Ç–∏ —Ç–µ—Å—Ç–æ–≤–µ –∑–∞–≤–¥–∞–Ω–Ω—è.

üìö –û–±–µ—Ä–∏ –Ω–∞–ø—Ä—è–º–æ–∫, —è–∫–∏–π —Ç–µ–±–µ —Ü—ñ–∫–∞–≤–∏—Ç—å:`;
  }

  /**
   * –ö–ª–∞–≤—ñ–∞—Ç—É—Ä–∞ –≤–∏–±–æ—Ä—É –ø—Ä–æ—Ñ–µ—Å—ñ—ó
   */
  static getProfessionKeyboard() {
    return Markup.inlineKeyboard([
      [
        Markup.button.callback('1Ô∏è‚É£ QA ‚Äî —Ö–æ—á—É —Ç–µ—Å—Ç—É–≤–∞—Ç–∏!', 'profession_QA'),
        Markup.button.callback('2Ô∏è‚É£ Business Analyst ‚Äî —Ö–æ—á—É –∞–Ω–∞–ª—ñ–∑—É–≤–∞—Ç–∏!', 'profession_BA')
      ]
    ]);
  }

  /**
   * –ö–ª–∞–≤—ñ–∞—Ç—É—Ä–∞ "–ì–æ—Ç–æ–≤–∏–π —Å–ø—Ä–æ–±—É–≤–∞—Ç–∏"
   */
  static getReadyToTryKeyboard() {
    return Markup.inlineKeyboard([
      [Markup.button.callback('–¢–∞–∫! –•–æ—á—É —Å–ø—Ä–æ–±—É–≤–∞—Ç–∏ üöÄ', 'ready_to_try')]
    ]);
  }

  /**
   * –ö–ª–∞–≤—ñ–∞—Ç—É—Ä–∞ "–ü–æ–¥—ñ–ª–∏—Ç–∏—Å—å –∫–æ–Ω—Ç–∞–∫—Ç–æ–º"
   */
  static getContactKeyboard() {
    return Markup.keyboard([
      [Markup.button.contactRequest('üì± –ü–æ–¥—ñ–ª–∏—Ç–∏—Å—å –∫–æ–Ω—Ç–∞–∫—Ç–æ–º')]
    ]).resize();
  }

  /**
   * –ì–æ–ª–æ–≤–Ω–∞ –∫–ª–∞–≤—ñ–∞—Ç—É—Ä–∞
   */
  static getMainKeyboard() {
    return Markup.inlineKeyboard([
      [Markup.button.callback('üîÑ –ü–æ—á–∞—Ç–∏ —Å–ø–æ—á–∞—Ç–∫—É', 'restart')]
    ]);
  }

  /**
   * –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∑–∞–ø–∏—Ç—É –∫–æ–Ω—Ç–∞–∫—Ç—É
   */
  static getContactRequestMessage() {
    return `üì± –î–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∑–∞–≤–¥–∞–Ω–Ω—è –ø–æ—Ç—Ä—ñ–±–Ω–æ –ø–æ–¥—ñ–ª–∏—Ç–∏—Å—å –∫–æ–Ω—Ç–∞–∫—Ç–æ–º.

–¶–µ –¥–æ–ø–æ–º–æ–∂–µ –Ω–∞–º:
‚Ä¢ –ù–∞–¥—ñ—Å–ª–∞—Ç–∏ —Ç–æ–±—ñ –∑–∞–≤–¥–∞–Ω–Ω—è
‚Ä¢ –ó–≤'—è–∑–∞—Ç–∏—Å—è –∑ —Ç–æ–±–æ—é –¥–ª—è –∑–≤–æ—Ä–æ—Ç–Ω–æ–≥–æ –∑–≤'—è–∑–∫—É
‚Ä¢ –í—ñ–¥—Å—Ç–µ–∂–∏—Ç–∏ —Ç–≤—ñ–π –ø—Ä–æ–≥—Ä–µ—Å

–ù–∞—Ç–∏—Å–Ω–∏ –∫–Ω–æ–ø–∫—É –Ω–∏–∂—á–µ:`;
  }

  /**
   * –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ —É—Å–ø—ñ—à–Ω–µ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –∫–æ–Ω—Ç–∞–∫—Ç—É
   */
  static getContactSavedMessage() {
    return `‚úÖ –ö–æ–Ω—Ç–∞–∫—Ç –∑–±–µ—Ä–µ–∂–µ–Ω–æ!

–¢–µ–ø–µ—Ä –Ω–∞–¥—Å–∏–ª–∞—é —Ç–æ–±—ñ —Ç–µ—Å—Ç–æ–≤–µ –∑–∞–≤–¥–∞–Ω–Ω—è...`;
  }

  /**
   * –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –≤—ñ–¥–ø—Ä–∞–≤–∫—É –∑–∞–≤–¥–∞–Ω–Ω—è
   */
  static getTaskSentMessage(profession) {
    const messages = {
      QA: `üìã –¢–µ—Å—Ç–æ–≤–µ –∑–∞–≤–¥–∞–Ω–Ω—è QA –Ω–∞–¥—ñ—Å–ª–∞–Ω–æ!

üéØ –¢–≤–æ—î –∑–∞–≤–¥–∞–Ω–Ω—è:
‚Ä¢ –ü—Ä–æ—Ç–µ—Å—Ç—É–≤–∞—Ç–∏ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å –¥–æ–¥–∞—Ç–∫—É
‚Ä¢ –ó–Ω–∞–π—Ç–∏ —Ç–∞ –æ–ø–∏—Å–∞—Ç–∏ –±–∞–≥–∏
‚Ä¢ –ù–∞–ø–∏—Å–∞—Ç–∏ —Ç–µ—Å—Ç-–∫–µ–π—Å–∏

‚è∞ –¢–µ—Ä–º—ñ–Ω –≤–∏–∫–æ–Ω–∞–Ω–Ω—è: 9 —Ä–æ–±–æ—á–∏—Ö –¥–Ω—ñ–≤
üì§ –ù–∞–¥—ñ—à–ª–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç —É –≤—ñ–¥–ø–æ–≤—ñ–¥—å –Ω–∞ —Ü–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è`,
      
      BA: `üìã –¢–µ—Å—Ç–æ–≤–µ –∑–∞–≤–¥–∞–Ω–Ω—è Business Analyst –Ω–∞–¥—ñ—Å–ª–∞–Ω–æ!

üéØ –¢–≤–æ—î –∑–∞–≤–¥–∞–Ω–Ω—è:
‚Ä¢ –ü—Ä–æ–∞–Ω–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –±—ñ–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å–∏
‚Ä¢ –°–∫–ª–∞—Å—Ç–∏ —Ç–µ—Ö–Ω—ñ—á–Ω–µ –∑–∞–≤–¥–∞–Ω–Ω—è
‚Ä¢ –°—Ç–≤–æ—Ä–∏—Ç–∏ –¥—ñ–∞–≥—Ä–∞–º–∏ –ø—Ä–æ—Ü–µ—Å—ñ–≤

‚è∞ –¢–µ—Ä–º—ñ–Ω –≤–∏–∫–æ–Ω–∞–Ω–Ω—è: 9 —Ä–æ–±–æ—á–∏—Ö –¥–Ω—ñ–≤
üì§ –ù–∞–¥—ñ—à–ª–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç —É –≤—ñ–¥–ø–æ–≤—ñ–¥—å –Ω–∞ —Ü–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è`
    };
    
    return messages[profession] || '–¢–µ—Å—Ç–æ–≤–µ –∑–∞–≤–¥–∞–Ω–Ω—è –Ω–∞–¥—ñ—Å–ª–∞–Ω–æ!';
  }

  /**
   * –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è
   */
  static getCompletionMessage() {
    return `üéâ –í—ñ—Ç–∞—î–º–æ! –¢–∏ –∑–∞–≤–µ—Ä—à–∏–≤ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥!

üìû –ù–∞—à –º–µ–Ω–µ–¥–∂–µ—Ä –∑–≤'—è–∂–µ—Ç—å—Å—è –∑ —Ç–æ–±–æ—é –Ω–∞–π–±–ª–∏–∂—á–∏–º —á–∞—Å–æ–º –¥–ª—è –æ–±–≥–æ–≤–æ—Ä–µ–Ω–Ω—è –Ω–∞—Å—Ç—É–ø–Ω–∏—Ö –∫—Ä–æ–∫—ñ–≤.

üí° –Ø–∫—â–æ –º–∞—î—à –ø–∏—Ç–∞–Ω–Ω—è, –∑–≤–µ—Ä—Ç–∞–π—Å—è –¥–æ –Ω–∞—Å!`;
  }

  /**
   * –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –Ω–µ–≤—ñ–¥–æ–º—É –∫–æ–º–∞–Ω–¥—É
   */
  static getUnknownMessage() {
    return `ü§î –ù–µ —Ä–æ–∑—É–º—ñ—é —Ü—é –∫–æ–º–∞–Ω–¥—É.

–°–ø—Ä–æ–±—É–π:
‚Ä¢ /start - –ø–æ—á–∞—Ç–∏ —Å–ø–æ—á–∞—Ç–∫—É
‚Ä¢ /help - –æ—Ç—Ä–∏–º–∞—Ç–∏ –¥–æ–ø–æ–º–æ–≥—É

–ê–±–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π –∫–Ω–æ–ø–∫–∏ –Ω–∏–∂—á–µ:`;
  }

  /**
   * –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –ø–æ–º–∏–ª–∫—É
   */
  static getErrorMessage() {
    return `‚ùå –©–æ—Å—å –ø—ñ—à–ª–æ –Ω–µ —Ç–∞–∫.

–°–ø—Ä–æ–±—É–π —â–µ —Ä–∞–∑ –∞–±–æ –∑–≤–µ—Ä–Ω–∏—Å—å –¥–æ –ø—ñ–¥—Ç—Ä–∏–º–∫–∏.

üîÑ –î–ª—è –ø–æ—á–∞—Ç–∫—É –Ω–∞—Ç–∏—Å–Ω–∏ /start`;
  }

  /**
   * –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –¥–æ–ø–æ–º–æ–≥—É
   */
  static getHelpMessage() {
    return `üÜò –î–æ–ø–æ–º–æ–≥–∞

üìã –î–æ—Å—Ç—É–ø–Ω—ñ –∫–æ–º–∞–Ω–¥–∏:
‚Ä¢ /start - –ø–æ—á–∞—Ç–∏ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥
‚Ä¢ /help - –ø–æ–∫–∞–∑–∞—Ç–∏ —Ü–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
‚Ä¢ /restart - –ø–æ—á–∞—Ç–∏ —Å–ø–æ—á–∞—Ç–∫—É

‚ùì –Ø–∫—â–æ –º–∞—î—à –ø–∏—Ç–∞–Ω–Ω—è, –∑–≤–µ—Ä—Ç–∞–π—Å—è –¥–æ –ø—ñ–¥—Ç—Ä–∏–º–∫–∏.`;
  }

  /**
   * –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ —Ä–µ—Å—Ç–∞—Ä—Ç
   */
  static getRestartMessage() {
    return `üîÑ –ü–æ—á–∏–Ω–∞—î–º–æ —Å–ø–æ—á–∞—Ç–∫—É!

–û–±–µ—Ä–∏ –Ω–∞–ø—Ä—è–º–æ–∫ –Ω–∞–≤—á–∞–Ω–Ω—è:`;
  }

  /**
   * –û—Ç—Ä–∏–º–∞–Ω–Ω—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å webhook
   */
  static getWebhookConfig() {
    return {
      enabled: process.env.WEBHOOK_ENABLED === 'true',
      url: process.env.WEBHOOK_URL,
      secret: process.env.WEBHOOK_SECRET
    };
  }

  /**
   * –û—Ç—Ä–∏–º–∞–Ω–Ω—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å –±–∞–∑–∏ –¥–∞–Ω–∏—Ö
   */
  static getDatabaseConfig() {
    return {
      host: process.env.DB_HOST || 'localhost',
      port: process.env.DB_PORT || 5432,
      name: process.env.DB_NAME || 'skillklan_db',
      user: process.env.DB_USER || 'skillklan_user',
      password: process.env.DB_PASSWORD
    };
  }

  /**
   * –û—Ç—Ä–∏–º–∞–Ω–Ω—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å –±–æ—Ç–∞
   */
  static getBotConfig() {
    return {
      token: process.env.TELEGRAM_BOT_TOKEN,
      webappUrl: process.env.WEBAPP_URL || 'https://skill-klan.github.io/new_onboarding/',
      environment: process.env.NODE_ENV || 'development'
    };
  }

  /**
   * –í–∞–ª—ñ–¥–∞—Ü—ñ—è –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó
   */
  static validate() {
    const errors = [];
    
    if (!process.env.TELEGRAM_BOT_TOKEN) {
      errors.push('TELEGRAM_BOT_TOKEN –Ω–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ');
    }
    
    if (!process.env.DB_HOST) {
      errors.push('DB_HOST –Ω–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ');
    }
    
    if (!process.env.DB_PASSWORD) {
      errors.push('DB_PASSWORD –Ω–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ');
    }
    
    return {
      isValid: errors.length === 0,
      errors: errors
    };
  }
}

module.exports = BotConfig;
