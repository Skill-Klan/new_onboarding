# SkillKlan Telegram Bot

Telegram –±–æ—Ç –¥–ª—è SkillKlan, —è–∫–∏–π –¥–æ–ø–æ–º–∞–≥–∞—î –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º –æ—Ç—Ä–∏–º–∞—Ç–∏ —Ç–µ—Å—Ç–æ–≤—ñ –∑–∞–≤–¥–∞–Ω–Ω—è —á–µ—Ä–µ–∑ —ñ–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∏–π —Ñ–ª–æ—É.

## üèóÔ∏è –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞

### Clean Architecture + DRY –ø—Ä–∏–Ω—Ü–∏–ø–∏

```
bot/
‚îú‚îÄ‚îÄ handlers/          # –û–±—Ä–æ–±–Ω–∏–∫–∏ –∫–æ–º–∞–Ω–¥ (Command Pattern)
‚îú‚îÄ‚îÄ services/          # –ë—ñ–∑–Ω–µ—Å-–ª–æ–≥—ñ–∫–∞
‚îú‚îÄ‚îÄ templates/         # –®–∞–±–ª–æ–Ω–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å —Ç–∞ –∫–ª–∞–≤—ñ–∞—Ç—É—Ä
‚îú‚îÄ‚îÄ middleware/        # –ü—Ä–æ–º—ñ–∂–Ω–∞ –ª–æ–≥—ñ–∫–∞
‚îú‚îÄ‚îÄ types/            # TypeScript —Ç–∏–ø–∏ —Ç–∞ –∫–ª–∞—Å–∏
‚îî‚îÄ‚îÄ bot.js            # –û—Å–Ω–æ–≤–Ω–∏–π —Ñ–∞–π–ª –±–æ—Ç–∞
```

### –ü–∞—Ç–µ—Ä–Ω–∏

- **Command Pattern** - –¥–ª—è –æ–±—Ä–æ–±–∫–∏ –∫–æ–º–∞–Ω–¥ –±–æ—Ç–∞
- **State Machine** - –¥–ª—è —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Å—Ç–∞–Ω–æ–º –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
- **Template Method** - –¥–ª—è —à–∞–±–ª–æ–Ω—ñ–≤ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å
- **Repository Pattern** - –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ –ë–î
- **Factory Pattern** - –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –æ–±'—î–∫—Ç—ñ–≤

## üîÑ –§–ª–æ—É —Ä–æ–±–æ—Ç–∏

1. **Start** (`/start`) - –í—ñ—Ç–∞–ª—å–Ω–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∑ –≤–∏–±–æ—Ä–æ–º –ø—Ä–æ—Ñ–µ—Å—ñ—ó
2. **Profession Selection** - –í–∏–±—ñ—Ä QA –∞–±–æ Business Analyst
3. **Contact Request** - –ó–∞–ø–∏—Ç –∫–æ–Ω—Ç–∞–∫—Ç–Ω–∏—Ö –¥–∞–Ω–∏—Ö
4. **Task Delivery** - –î–æ—Å—Ç–∞–≤–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∑–∞–≤–¥–∞–Ω–Ω—è
5. **Task Submission** - –ó–¥–∞—á–∞ –∑–∞–≤–¥–∞–Ω–Ω—è –º–µ–Ω–µ–¥–∂–µ—Ä—É
6. **Completed** - –ó–∞–≤–µ—Ä—à–µ–Ω–Ω—è —Ñ–ª–æ—É

## üì± –ö–æ–º–∞–Ω–¥–∏ —Ç–∞ –∫–Ω–æ–ø–∫–∏

### –ö–æ–º–∞–Ω–¥–∏
- `/start` - –ü–æ—á–∞—Ç–æ–∫ —Ä–æ–±–æ—Ç–∏ –∑ –±–æ—Ç–æ–º

### Callback –∫–Ω–æ–ø–∫–∏
- `profession_QA` - –í–∏–±—ñ—Ä QA
- `profession_BA` - –í–∏–±—ñ—Ä Business Analyst
- `ready_to_try` - –ì–æ—Ç–æ–≤–∏–π —Å–ø—Ä–æ–±—É–≤–∞—Ç–∏
- `submit_task` - –ó–¥–∞—Ç–∏ –∑–∞–≤–¥–∞–Ω–Ω—è
- `show_faq` - –ü–æ–∫–∞–∑–∞—Ç–∏ FAQ
- `restart` - –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏

### –ö–ª–∞–≤—ñ–∞—Ç—É—Ä–∏
- **Contact Request** - –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞ –∫–Ω–æ–ø–∫–∞ Telegram –¥–ª—è –ø–æ–¥—ñ–ª–∏—Ç–∏—Å—è –∫–æ–Ω—Ç–∞–∫—Ç–æ–º
- **Inline –∫–Ω–æ–ø–∫–∏** - –î–ª—è –Ω–∞–≤—ñ–≥–∞—Ü—ñ—ó —Ç–∞ –≤–∏–±–æ—Ä—É

## üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö

### –¢–∞–±–ª–∏—Ü—ñ
- `bot_users` - –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ —Ç–∞ —ó—Ö —Å—Ç–∞–Ω
- `bot_contacts` - –ö–æ–Ω—Ç–∞–∫—Ç–Ω—ñ –¥–∞–Ω—ñ
- `bot_task_deliveries` - –î–æ—Å—Ç–∞–≤–∫–∞ –∑–∞–≤–¥–∞–Ω—å
- `bot_task_submissions` - –ó–¥–∞—á–∞ –∑–∞–≤–¥–∞–Ω—å

### –ú—ñ–≥—Ä–∞—Ü—ñ—è
```sql
-- –í–∏–∫–æ–Ω–∞—Ç–∏ SQL —Å–∫—Ä–∏–ø—Ç
psql -d skillklan_db -f database/bot_tables.sql
```

## ‚öôÔ∏è –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

### –ó–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞
```env
TELEGRAM_BOT_TOKEN=your_bot_token_here
WEBAPP_URL=https://your-domain.com/faq
DB_HOST=localhost
DB_PORT=5432
DB_NAME=skillklan
DB_USER=postgres
DB_PASSWORD=password
```

### –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –±–æ—Ç–∞
1. –ù–∞–ø–∏—Å–∞—Ç–∏ @BotFather –≤ Telegram
2. –í–∏–∫–æ–Ω–∞—Ç–∏ –∫–æ–º–∞–Ω–¥—É `/newbot`
3. –í–∫–∞–∑–∞—Ç–∏ –Ω–∞–∑–≤—É —Ç–∞ username
4. –û—Ç—Ä–∏–º–∞—Ç–∏ —Ç–æ–∫–µ–Ω
5. –î–æ–¥–∞—Ç–∏ —Ç–æ–∫–µ–Ω –≤ `.env` —Ñ–∞–π–ª

## üöÄ –ó–∞–ø—É—Å–∫

### –†–æ–∑—Ä–æ–±–∫–∞
```bash
cd server
npm run dev
```

### –ü—Ä–æ–¥–∞–∫—à–Ω
```bash
cd server
npm start
```

## üìä –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥

### –õ–æ–≥–∏
- –í—Å—ñ –¥—ñ—ó –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –ª–æ–≥—É—é—Ç—å—Å—è
- –ü–æ–º–∏–ª–∫–∏ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≤ –∫–æ–Ω—Å–æ–ª—ñ
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ —á–µ—Ä–µ–∑ API

### –ú–µ—Ç—Ä–∏–∫–∏
- –ö—ñ–ª—å–∫—ñ—Å—Ç—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
- –ö–æ–Ω–≤–µ—Ä—Å—ñ—è –ø–æ –µ—Ç–∞–ø–∞—Ö
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞–≤–¥–∞–Ω—å

## üîß –†–æ–∑—à–∏—Ä–µ–Ω–Ω—è

### –î–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–æ–≤–æ—ó –∫–æ–º–∞–Ω–¥–∏
1. –°—Ç–≤–æ—Ä–∏—Ç–∏ –æ–±—Ä–æ–±–Ω–∏–∫ –≤ `handlers/`
2. –£—Å–ø–∞–¥–∫—É–≤–∞—Ç–∏ –≤—ñ–¥ `BaseHandler`
3. –†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ `execute()` —Ç–∞ `getNextStep()`
4. –î–æ–¥–∞—Ç–∏ –≤ `bot.js`

### –î–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–æ–≤–æ—ó –ø—Ä–æ—Ñ–µ—Å—ñ—ó
1. –û–Ω–æ–≤–∏—Ç–∏ `types/index.js`
2. –î–æ–¥–∞—Ç–∏ —à–∞–±–ª–æ–Ω –∑–∞–≤–¥–∞–Ω–Ω—è –≤ `TaskService`
3. –û–Ω–æ–≤–∏—Ç–∏ –∫–ª–∞–≤—ñ–∞—Ç—É—Ä–∏

### –î–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–æ–≤–æ–≥–æ –∫—Ä–æ–∫—É
1. –î–æ–¥–∞—Ç–∏ –≤ `BotStep` enum
2. –°—Ç–≤–æ—Ä–∏—Ç–∏ –æ–±—Ä–æ–±–Ω–∏–∫
3. –û–Ω–æ–≤–∏—Ç–∏ –ª–æ–≥—ñ–∫—É –ø–µ—Ä–µ—Ö–æ–¥—ñ–≤

## üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è —Ñ–ª–æ—É
1. –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –±–æ—Ç–∞
2. –ù–∞–ø–∏—Å–∞—Ç–∏ `/start`
3. –ü—Ä–æ–π—Ç–∏ –≤—Å—ñ –µ—Ç–∞–ø–∏
4. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –≤ –ë–î

### –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –ø–æ–º–∏–ª–æ–∫
- –ù–µ–≤–∞–ª—ñ–¥–Ω—ñ –¥–∞–Ω—ñ
- –í—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç—É
- –ü–æ–º–∏–ª–∫–∏ –ë–î

## üìö FAQ Integration

–ë–æ—Ç —ñ–Ω—Ç–µ–≥—Ä—É—î—Ç—å—Å—è –∑ WebApp FAQ:
- –ö–Ω–æ–ø–∫–∞ "–î—ñ–∑–Ω–∞—Ç–∏—Å—è –±—ñ–ª—å—à–µ" –≤—ñ–¥–∫—Ä–∏–≤–∞—î FAQ
- FAQ –∑–∞–ª–∏—à–∞—î—Ç—å—Å—è –¥–æ—Å—Ç—É–ø–Ω–∏–º –Ω–∞ –≤—Å—ñ—Ö –µ—Ç–∞–ø–∞—Ö
- –ü–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞–ª–∞—à—Ç–æ–≤—É—î—Ç—å—Å—è —á–µ—Ä–µ–∑ `WEBAPP_URL`

## üîí –ë–µ–∑–ø–µ–∫–∞

- –í–∞–ª—ñ–¥–∞—Ü—ñ—è –≤—Å—ñ—Ö –≤—Ö—ñ–¥–Ω–∏—Ö –¥–∞–Ω–∏—Ö
- –ó–∞—Ö–∏—Å—Ç –≤—ñ–¥ —Å–ø–∞–º—É
- –õ–æ–≥—É–≤–∞–Ω–Ω—è –ø—ñ–¥–æ–∑—Ä—ñ–ª–∏—Ö –¥—ñ–π
- –û–±–º–µ–∂–µ–Ω–Ω—è —á–∞—Å—Ç–æ—Ç–∏ –∑–∞–ø–∏—Ç—ñ–≤

## üìà –ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å

- –ö–µ—à—É–≤–∞–Ω–Ω—è —Å—Ç–∞–Ω—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
- –û–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω—ñ SQL –∑–∞–ø–∏—Ç–∏
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞ –æ–±—Ä–æ–±–∫–∞
- Graceful shutdown

## üêõ –í—ñ–¥–ª–∞–¥–∫–∞

### –õ–æ–≥–∏
```bash
# –ü–µ—Ä–µ–≥–ª—è–¥ –ª–æ–≥—ñ–≤
tail -f logs/bot.log

# –§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è –ø–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É
grep "user_id:123456789" logs/bot.log
```

### –°—Ç–∞–Ω –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
```sql
-- –ü–µ—Ä–µ–≥–ª—è–¥ —Å—Ç–∞–Ω—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
SELECT * FROM bot_users WHERE telegram_id = 123456789;
```

## üìû –ü—ñ–¥—Ç—Ä–∏–º–∫–∞

–ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö:
1. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ª–æ–≥–∏
2. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∑'—î–¥–Ω–∞–Ω–Ω—è –∑ –ë–î
3. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞
4. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è webhook (—è–∫—â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è)
