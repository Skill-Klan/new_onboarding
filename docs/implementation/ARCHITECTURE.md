# –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ SkillKlan Telegram Bot

## üìã –ó–º—ñ—Å—Ç

1. [–ó–∞–≥–∞–ª—å–Ω–∞ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞](#–∑–∞–≥–∞–ª—å–Ω–∞-–∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞)
2. [–ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ —Å–∏—Å—Ç–µ–º–∏](#–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏-—Å–∏—Å—Ç–µ–º–∏)
3. [–ü–æ—Ç—ñ–∫ –¥–∞–Ω–∏—Ö](#–ø–æ—Ç—ñ–∫-–¥–∞–Ω–∏—Ö)
4. [–Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó](#—ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó)
5. [–ë–µ–∑–ø–µ–∫–∞](#–±–µ–∑–ø–µ–∫–∞)
6. [–ú–∞—Å—à—Ç–∞–±—É–≤–∞–Ω–Ω—è](#–º–∞—Å—à—Ç–∞–±—É–≤–∞–Ω–Ω—è)

## üèóÔ∏è –ó–∞–≥–∞–ª—å–Ω–∞ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞

### –í–∏—Å–æ–∫–æ—Ä—ñ–≤–Ω–µ–≤–∞ —Å—Ö–µ–º–∞
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Telegram      ‚îÇ    ‚îÇ   Node.js Bot   ‚îÇ    ‚îÇ   PostgreSQL    ‚îÇ
‚îÇ   Users         ‚îÇ‚óÑ‚îÄ‚îÄ‚ñ∫‚îÇ   Server        ‚îÇ‚óÑ‚îÄ‚îÄ‚ñ∫‚îÇ   Database      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                              ‚îÇ
                              ‚ñº
                       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                       ‚îÇ   Discord       ‚îÇ
                       ‚îÇ   Webhook       ‚îÇ
                       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–Ω—ñ –ø—Ä–∏–Ω—Ü–∏–ø–∏
- **–ú–æ–¥—É–ª—å–Ω—ñ—Å—Ç—å:** –ö–æ–∂–µ–Ω –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –º–∞—î —á—ñ—Ç–∫—É –≤—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω—ñ—Å—Ç—å
- **–†–æ–∑–¥—ñ–ª–µ–Ω–Ω—è –≤—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω–æ—Å—Ç–µ–π:** Handlers, Services, Database
- **–ë–µ–∑ –∫–µ—à—É–≤–∞–Ω–Ω—è:** –ö–æ–∂–µ–Ω –∑–∞–ø–∏—Ç –π–¥–µ –±–µ–∑–ø–æ—Å–µ—Ä–µ–¥–Ω—å–æ –≤ –ë–î
- **–û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫:** Graceful degradation
- **–õ–æ–≥—É–≤–∞–Ω–Ω—è:** –î–µ—Ç–∞–ª—å–Ω–µ –ª–æ–≥—É–≤–∞–Ω–Ω—è –≤—Å—ñ—Ö –æ–ø–µ—Ä–∞—Ü—ñ–π

## üß© –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ —Å–∏—Å—Ç–µ–º–∏

### 1. Bot Core (`bot/bot.js`)
**–í—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω—ñ—Å—Ç—å:** –û—Å–Ω–æ–≤–Ω–∏–π –∫–ª–∞—Å –±–æ—Ç–∞, –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü—ñ—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤

```javascript
class SkillKlanBot {
  constructor() {
    this.bot = new Telegraf(process.env.TELEGRAM_BOT_TOKEN);
    this.databaseService = new DatabaseService();
    this.userStateService = new UserStateService(this.databaseService);
    this.contactService = new ContactService(this.databaseService);
    this.taskService = new TaskService(this.databaseService);
    this.webhookService = new WebhookService();
    this.reminderService = new ReminderService(this.databaseService, this.bot, this.webhookService);
  }
}
```

**–§—É–Ω–∫—Ü—ñ—ó:**
- –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –≤—Å—ñ—Ö —Å–µ—Ä–≤—ñ—Å—ñ–≤
- –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è middleware
- –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –æ–±—Ä–æ–±–Ω–∏–∫—ñ–≤
- –ó–∞–ø—É—Å–∫ cron jobs

### 2. Handlers (`bot/handlers/`)
**–í—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω—ñ—Å—Ç—å:** –û–±—Ä–æ–±–∫–∞ –∫–æ–º–∞–Ω–¥ —Ç–∞ –¥—ñ–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤

#### –Ü—î—Ä–∞—Ä—Ö—ñ—è –æ–±—Ä–æ–±–Ω–∏–∫—ñ–≤
```
BaseHandler (–∞–±—Å—Ç—Ä–∞–∫—Ç–Ω–∏–π)
‚îú‚îÄ‚îÄ StartHandler
‚îú‚îÄ‚îÄ ProfessionHandler
‚îú‚îÄ‚îÄ ReadyToTryHandler
‚îú‚îÄ‚îÄ ContactHandler
‚îú‚îÄ‚îÄ TaskHandler
‚îú‚îÄ‚îÄ TaskSubmissionHandler
‚îú‚îÄ‚îÄ RestartHandler
‚îî‚îÄ‚îÄ UnknownHandler
```

#### –ü–∞—Ç—Ç–µ—Ä–Ω –æ–±—Ä–æ–±–∫–∏
```javascript
class BaseHandler {
  async handle(ctx, userState) {
    // 1. –õ–æ–≥—É–≤–∞–Ω–Ω—è
    this.logRequest(ctx, userState);
    
    // 2. –í–∞–ª—ñ–¥–∞—Ü—ñ—è —Å—Ç–∞–Ω—É
    if (!this.validateState(userState)) {
      await this.handleInvalidState(ctx, userState);
      return;
    }
    
    // 3. –í–∏–∫–æ–Ω–∞–Ω–Ω—è –ª–æ–≥—ñ–∫–∏
    await this.execute(ctx, userState);
    
    // 4. –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Å—Ç–∞–Ω—É
    await this.updateUserState(ctx, userState);
  }
}
```

### 3. Services (`bot/services/`)
**–í—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω—ñ—Å—Ç—å:** –ë—ñ–∑–Ω–µ—Å-–ª–æ–≥—ñ–∫–∞ —Ç–∞ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó

#### UserStateService
- –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Å—Ç–∞–Ω–æ–º –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
- –ë–µ–∑ –∫–µ—à—É–≤–∞–Ω–Ω—è (–∫–æ–∂–µ–Ω –∑–∞–ø–∏—Ç –≤ –ë–î)
- –í–∞–ª—ñ–¥–∞—Ü—ñ—è —Ç–∞ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü—ñ—è –¥–∞–Ω–∏—Ö

#### ContactService
- –í–∞–ª—ñ–¥–∞—Ü—ñ—è –∫–æ–Ω—Ç–∞–∫—Ç–Ω–∏—Ö –¥–∞–Ω–∏—Ö
- –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –≤ –ë–î
- –ú–∞—Å–∫—É–≤–∞–Ω–Ω—è –¥–ª—è –ª–æ–≥—ñ–≤

#### TaskService
- –†–æ–±–æ—Ç–∞ –∑ PDF —Ñ–∞–π–ª–∞–º–∏
- –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –∑–∞–≤–¥–∞–Ω—å
- –í–∞–ª—ñ–¥–∞—Ü—ñ—è —ñ—Å–Ω—É–≤–∞–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤

#### ReminderService
- –ü–ª–∞–Ω—É–≤–∞–Ω–Ω—è –Ω–∞–≥–∞–¥—É–≤–∞–Ω—å
- Cron job —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è
- –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ webhook

#### WebhookService
- –í—ñ–¥–ø—Ä–∞–≤–∫–∞ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å –≤ Discord
- –§–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è embed –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å
- –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫ HTTP

### 4. Database Layer (`shared/database/`)
**–í—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω—ñ—Å—Ç—å:** –ê–±—Å—Ç—Ä–∞–∫—Ü—ñ—è —Ä–æ–±–æ—Ç–∏ –∑ –ë–î

```javascript
class DatabaseService {
  constructor() {
    this.pool = new Pool({
      host: process.env.DB_HOST,
      port: process.env.DB_PORT,
      database: process.env.DB_NAME,
      user: process.env.DB_USER,
      password: process.env.DB_PASSWORD,
    });
  }
}
```

**–§—É–Ω–∫—Ü—ñ—ó:**
- –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ PostgreSQL
- –í–∏–∫–æ–Ω–∞–Ω–Ω—è SQL –∑–∞–ø–∏—Ç—ñ–≤
- –¢—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó
- –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫ –ë–î

### 5. Templates (`bot/templates/`)
**–í—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω—ñ—Å—Ç—å:** –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Ç–µ–∫—Å—Ç–∞–º–∏ —Ç–∞ –∫–ª–∞–≤—ñ–∞—Ç—É—Ä–∞–º–∏

#### MessageTemplates
- –¶–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–µ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Ç–µ–∫—Å—Ç–∞–º–∏
- –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ –ª–æ–∫–∞–ª—ñ–∑–∞—Ü—ñ—ó
- –î–∏–Ω–∞–º—ñ—á–Ω–µ —Ñ–æ—Ä–º—É–≤–∞–Ω–Ω—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å

#### KeyboardTemplates
- –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è inline –∫–ª–∞–≤—ñ–∞—Ç—É—Ä
- –ö–Ω–æ–ø–∫–∏ –∑ callback –¥–∞–Ω–∏–º–∏
- WebApp —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è

## üîÑ –ü–æ—Ç—ñ–∫ –¥–∞–Ω–∏—Ö

### 1. –ü–æ—á–∞—Ç–æ–∫ –≤–∑–∞—î–º–æ–¥—ñ—ó
```
User ‚Üí /start ‚Üí StartHandler ‚Üí UserStateService ‚Üí DatabaseService ‚Üí PostgreSQL
                                    ‚Üì
                              WebhookService ‚Üí Discord
```

### 2. –í–∏–±—ñ—Ä –ø—Ä–æ—Ñ–µ—Å—ñ—ó
```
User ‚Üí profession_QA ‚Üí ProfessionHandler ‚Üí UserStateService ‚Üí DatabaseService ‚Üí PostgreSQL
```

### 3. –ù–∞–¥–∞–Ω–Ω—è –∫–æ–Ω—Ç–∞–∫—Ç—É
```
User ‚Üí Contact ‚Üí ContactHandler ‚Üí ContactService ‚Üí DatabaseService ‚Üí PostgreSQL
                                      ‚Üì
                                WebhookService ‚Üí Discord
```

### 4. –í—ñ–¥–ø—Ä–∞–≤–∫–∞ –∑–∞–≤–¥–∞–Ω–Ω—è
```
User ‚Üí "–ì–æ—Ç–æ–≤–∏–π" ‚Üí TaskHandler ‚Üí TaskService ‚Üí PDF File
                              ‚Üì
                        UserStateService ‚Üí DatabaseService ‚Üí PostgreSQL
                              ‚Üì
                        WebhookService ‚Üí Discord
```

### 5. –ó–∞–≤–µ—Ä—à–µ–Ω–Ω—è –∑–∞–≤–¥–∞–Ω–Ω—è
```
User ‚Üí "–ó–¥–∞—Ç–∏" ‚Üí TaskSubmissionHandler ‚Üí WebhookService ‚Üí Discord
```

### 6. –ù–∞–≥–∞–¥—É–≤–∞–Ω–Ω—è
```
Cron Job ‚Üí ReminderService ‚Üí Bot ‚Üí User
                    ‚Üì
              WebhookService ‚Üí Discord
```

## üîó –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó

### 1. Telegram Bot API
**–ë—ñ–±–ª—ñ–æ—Ç–µ–∫–∞:** Telegraf 4.15.0
**–§—É–Ω–∫—Ü—ñ—ó:**
- –û–±—Ä–æ–±–∫–∞ –∫–æ–º–∞–Ω–¥ —Ç–∞ callback'—ñ–≤
- –í—ñ–¥–ø—Ä–∞–≤–∫–∞ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å —Ç–∞ —Ñ–∞–π–ª—ñ–≤
- –†–æ–±–æ—Ç–∞ –∑ –∫–ª–∞–≤—ñ–∞—Ç—É—Ä–∞–º–∏
- WebApp —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è

### 2. PostgreSQL
**–ë—ñ–±–ª—ñ–æ—Ç–µ–∫–∞:** pg 8.11.0
**–§—É–Ω–∫—Ü—ñ—ó:**
- –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è —Å—Ç–∞–Ω—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
- –ö–æ–Ω—Ç–∞–∫—Ç–Ω—ñ –¥–∞–Ω—ñ
- –Ü—Å—Ç–æ—Ä—ñ—è –¥—ñ–π
- –ù–∞–≥–∞–¥—É–≤–∞–Ω–Ω—è

### 3. Discord Webhook
**–ë—ñ–±–ª—ñ–æ—Ç–µ–∫–∞:** axios 1.6.0
**–§—É–Ω–∫—Ü—ñ—ó:**
- –í—ñ–¥–ø—Ä–∞–≤–∫–∞ embed –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å
- –ö–æ–ª—å–æ—Ä–æ–≤–µ –∫–æ–¥—É–≤–∞–Ω–Ω—è
- Timestamp —Ñ–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è
- –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫

### 4. Cron Jobs
**–ë—ñ–±–ª—ñ–æ—Ç–µ–∫–∞:** node-cron 3.0.3
**–§—É–Ω–∫—Ü—ñ—ó:**
- –ü–ª–∞–Ω—É–≤–∞–Ω–Ω—è –Ω–∞–≥–∞–¥—É–≤–∞–Ω—å
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –¥–µ–¥–ª–∞–π–Ω—ñ–≤
- Timezone –ø—ñ–¥—Ç—Ä–∏–º–∫–∞

## üîí –ë–µ–∑–ø–µ–∫–∞

### 1. –í–∞–ª—ñ–¥–∞—Ü—ñ—è –¥–∞–Ω–∏—Ö
```javascript
// –í–∞–ª—ñ–¥–∞—Ü—ñ—è —Ç–µ–ª–µ—Ñ–æ–Ω–Ω–∏—Ö –Ω–æ–º–µ—Ä—ñ–≤
const cleanPhone = phone.replace(/[^\d]/g, '');
if (cleanPhone.length !== 10 || !cleanPhone.startsWith('0')) {
  throw new Error('–ù–µ–≤—ñ—Ä–Ω–∏–π —Ñ–æ—Ä–º–∞—Ç –Ω–æ–º–µ—Ä–∞ —Ç–µ–ª–µ—Ñ–æ–Ω—É');
}

// –í–∞–ª—ñ–¥–∞—Ü—ñ—è –ø—Ä–æ—Ñ–µ—Å—ñ–π
if (!['qa', 'ba'].includes(profession)) {
  throw new Error('–ù–µ–≤—ñ—Ä–Ω–∞ –ø—Ä–æ—Ñ–µ—Å—ñ—è');
}
```

### 2. SQL Injection Protection
```javascript
// –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–∏—Ö –∑–∞–ø–∏—Ç—ñ–≤
const query = 'SELECT * FROM bot_users WHERE telegram_id = $1';
const result = await this.pool.query(query, [telegramId]);
```

### 3. Error Handling
```javascript
try {
  await this.webhookService.sendMessage(embed);
} catch (webhookError) {
  console.error('‚ùå Webhook –ø–æ–º–∏–ª–∫–∞:', webhookError);
  // –ù–µ –∑—É–ø–∏–Ω—è—î–º–æ —Ä–æ–±–æ—Ç—É –±–æ—Ç–∞
}
```

### 4. Environment Variables
```javascript
// –ß—É—Ç–ª–∏–≤—ñ –¥–∞–Ω—ñ –≤ .env
TELEGRAM_BOT_TOKEN=your_bot_token
DB_PASSWORD=your_password
```

## üìà –ú–∞—Å—à—Ç–∞–±—É–≤–∞–Ω–Ω—è

### 1. –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–µ –º–∞—Å—à—Ç–∞–±—É–≤–∞–Ω–Ω—è
- **Load Balancer:** Nginx –¥–ª—è —Ä–æ–∑–ø–æ–¥—ñ–ª—É –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
- **Multiple Instances:** –ö—ñ–ª—å–∫–∞ –µ–∫–∑–µ–º–ø–ª—è—Ä—ñ–≤ –±–æ—Ç–∞
- **Database Replication:** Master-Slave –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è

### 2. –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–µ –º–∞—Å—à—Ç–∞–±—É–≤–∞–Ω–Ω—è
- **Connection Pooling:** pg Pool –¥–ª—è –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó –∑'—î–¥–Ω–∞–Ω—å
- **Memory Management:** –û–±–º–µ–∂–µ–Ω–Ω—è —Ä–æ–∑–º—ñ—Ä—É –∫–µ—à—É
- **CPU Optimization:** –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó

### 3. –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥
```javascript
// Health check endpoint
app.get("/api/health", (req, res) => {
  res.json({ 
    status: "ok", 
    timestamp: new Date().toISOString(),
    uptime: process.uptime()
  });
});
```

### 4. –õ–æ–≥—É–≤–∞–Ω–Ω—è
```javascript
// –°—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω–µ –ª–æ–≥—É–≤–∞–Ω–Ω—è
console.log('üîçüîçüîç ServiceName: –û–ø–µ—Ä–∞—Ü—ñ—è:', {
  userId: telegramId,
  action: 'task_sent',
  timestamp: new Date().toISOString()
});
```

## üöÄ Deployment Architecture

### Docker Compose
```yaml
version: '3.8'
services:
  bot:
    build: ./server
    environment:
      - DB_HOST=postgres
      - DB_PASSWORD=${DB_PASSWORD}
    depends_on:
      - postgres
  
  postgres:
    image: postgres:13
    environment:
      - POSTGRES_DB=skillklan_db
      - POSTGRES_USER=skillklan_user
      - POSTGRES_PASSWORD=${DB_PASSWORD}
    volumes:
      - postgres_data:/var/lib/postgresql/data
  
  nginx:
    image: nginx:alpine
    ports:
      - "80:80"
      - "443:443"
    volumes:
      - ./docker/nginx/conf.d:/etc/nginx/conf.d
```

### Production Considerations
1. **SSL/TLS:** HTTPS –¥–ª—è webhook
2. **Backup:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ —Ä–µ–∑–µ—Ä–≤–Ω–µ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è –ë–î
3. **Monitoring:** Prometheus + Grafana
4. **Logging:** ELK Stack –∞–±–æ –∞–Ω–∞–ª–æ–≥
5. **CI/CD:** GitHub Actions –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ –¥–µ–ø–ª–æ—é

## üìä Performance Metrics

### –ö–ª—é—á–æ–≤—ñ –ø–æ–∫–∞–∑–Ω–∏–∫–∏
- **Response Time:** < 200ms –¥–ª—è –±—ñ–ª—å—à–æ—Å—Ç—ñ –æ–ø–µ—Ä–∞—Ü—ñ–π
- **Database Queries:** –û–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω—ñ –∑ —ñ–Ω–¥–µ–∫—Å–∞–º–∏
- **Memory Usage:** < 100MB –Ω–∞ –µ–∫–∑–µ–º–ø–ª—è—Ä
- **Uptime:** 99.9% –¥–æ—Å—Ç—É–ø–Ω—ñ—Å—Ç—å

### –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó
- **Connection Pooling:** –ü–µ—Ä–µ–≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –∑'—î–¥–Ω–∞–Ω—å –ë–î
- **Async/Await:** –ù–µ–±–ª–æ–∫—É—é—á—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó
- **Error Recovery:** Graceful degradation
- **Resource Cleanup:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –∑–≤—ñ–ª—å–Ω–µ–Ω–Ω—è —Ä–µ—Å—É—Ä—Å—ñ–≤

## üîÑ Data Flow Patterns

### 1. Request-Response Pattern
```
User Request ‚Üí Handler ‚Üí Service ‚Üí Database ‚Üí Response
```

### 2. Event-Driven Pattern
```
User Action ‚Üí Handler ‚Üí Webhook ‚Üí Discord Notification
```

### 3. Scheduled Pattern
```
Cron Job ‚Üí ReminderService ‚Üí User Notification + Webhook
```

### 4. State Machine Pattern
```
User State ‚Üí Validation ‚Üí Transition ‚Üí New State
```

## üéØ Future Architecture Considerations

### 1. Microservices
- –†–æ–∑–¥—ñ–ª–µ–Ω–Ω—è –Ω–∞ –æ–∫—Ä–µ–º—ñ —Å–µ—Ä–≤—ñ—Å–∏
- API Gateway –¥–ª—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü—ñ—ó
- Service Discovery

### 2. Event Sourcing
- –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –≤—Å—ñ—Ö –ø–æ–¥—ñ–π
- –í—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è —Å—Ç–∞–Ω—É –∑ –ø–æ–¥—ñ–π
- –ê—É–¥–∏—Ç —Ç–∞ –∞–Ω–∞–ª—ñ—Ç–∏–∫–∞

### 3. CQRS
- –†–æ–∑–¥—ñ–ª–µ–Ω–Ω—è –∫–æ–º–∞–Ω–¥ —Ç–∞ –∑–∞–ø–∏—Ç—ñ–≤
- –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è –¥–ª—è —á–∏—Ç–∞–Ω–Ω—è/–∑–∞–ø–∏—Å—É
- Eventual consistency

### 4. Message Queues
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞ –æ–±—Ä–æ–±–∫–∞
- Retry –º–µ—Ö–∞–Ω—ñ–∑–º–∏
- Dead letter queues